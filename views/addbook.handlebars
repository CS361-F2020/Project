
<div class="col-xl-8 col-lg-8 col-md-10 col-sm-12 col-12">
    <h3 class="pb-3">Add a Book</h3>
  <div class="pb-3">
    <div>Enter the ISBN-10 or ISBN-13 of the book you would like to add. Numbers only, do not include dashes.</div>
  </div>
    <form action='/addbook' method="POST">
        <div class="form-row">
            <div class="form-group col-6">
                <label for="isbn">ISBN</label>
                <input type="text" class="form-control" id="inputid" pattern="[0-9]+" maxlength="13" onchange="javascript:getBookDetailsByISBN" placeholder="ISBN please enter numbers only"
                    required>
            </div>
        </div>

        <div class="form-row">
            <div class="form-group col-6">
             <label for="title">Title</label>
                <input type="text" class="form-control" name="title" required readonly >
            </div>
            <div class="form-group col">
             <label for="author">Author</label>
                <input type="text" class="form-control" name="author" required readonly>
            </div>
        </div>

        <div class="form-row">
            <div class="form-group col-6">
             <label for="genre">Genre</label>
                <input type="text" class="form-control" name="genre" required readonly>
            </div>
            <div class="form-group col-6">
             <label for="language">Language</label>
                <input type="text" class="form-control" name="language" required readonly>
            </div>
        </div>

        <!-- hidded fields will populate from api, not labeled-->
        <div class="form-row">
            <input type="hidden" class="form-control" name="rating" readonly>
            <input type="hidden" class="form-control" name="pageCount" readonly>
            <input type="hidden" class="form-control" name="pubDate" readonly>
            <input type="hidden" class="form-control" name="imgUrl" readonly>
        </div>

        <div class="text-center">
            <input type="submit" class="btn btn-primary w-75" value="Submit" />
        </div>
    </form>
</div>

<script>
    function getBookDetailsByISBN{
        var inputId = $('#inputid').val()
        console.log(inputId)
        {$.ajax({
            url: '/googleapi/isbn/' + inputId,
            method: 'GET', 
            dataType: 'json', 
            success: function(res){
                $('title').val(res.title)
                $('author').val(res.author)
                $('genre').val(res.genre)
                $('language').val(res.language)
                $('rating').val(res.rating)
                $('pageCount').val(res.pagecount)
                $('pubDate').val(res.pubDate)
                $('imgUrl').val(res.imgUrl)
                console.log(res.title)
            },
            error: function(jqXHR, textstatus, errorThrown){
                console.log(textstatus)
                alert('Error occured while retrieving book')
            }
        })
    }        
</script>